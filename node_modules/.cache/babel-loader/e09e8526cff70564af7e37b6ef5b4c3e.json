{"ast":null,"code":"import _classCallCheck from\"D:\\\\projects\\\\information\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\projects\\\\information\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\projects\\\\information\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\projects\\\\information\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{loadStripe}from'@stripe/stripe-js';var Payment=/*#__PURE__*/function(_React$Component){_inherits(Payment,_React$Component);var _super=_createSuper(Payment);function Payment(){var _this;_classCallCheck(this,Payment);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.doPayment=function(){// Publishable Key from Stripe Dashboard\nvar stripe=loadStripe('pk_test_izTRazS0reCuAYbvSfCVkfAQ004KviIEJL');var paymentBtn=document.getElementById('stripe-payment-btn');var sessionId;paymentBtn.addEventListener('click',function(){var orderData={currency:'EUR',quantity:1,amount:10,name:'Some product',description:'Product description',image:'https://image-url/',customerEmail:'vshrimali709@gmail.com',clientId:'12345'};// Url to Firebase function\nfetch('https://us-central1-information-management-s-c7f1c.cloudfunctions.net/createOrderAndSession',{method:'POST',// Adding the order data to payload\nbody:JSON.stringify(orderData)}).then(function(response){return response.json();}).then(function(data){// Getting the session id from firebase function\nvar body=JSON.parse(data.body);return sessionId=body.sessionId;}).then(function(sessionId){// Redirecting to payment form page\nstripe.redirectToCheckout({sessionId:sessionId}).then(function(result){console.log(result);});});});stripe.redirectToCheckout({// Make the id field from the Checkout Session creation API response\n// available to this file, so you can provide it as parameter here\n// instead of the {{CHECKOUT_SESSION_ID}} placeholder.\nsessionId:body.sessionId}).then(function(result){console.log(result);// If `redirectToCheckout` fails due to a browser or network\n// error, display the localized error message to your customer\n// using `result.error.message`.\n});};return _this;}_createClass(Payment,[{key:\"render\",// doPayment = async () => {\n//   fetch('https://us-central1-information-management-s-c7f1c.cloudfunctions.net/payWithStripe', {\n//     method: 'POST',\n//     headers: {\n//       Accept: 'application/json',\n//       'Content-Type': 'application/json',\n//     },\n//     body: JSON.stringify({\n//       amount: 10,\n//       currency: \"usd\",\n//     }),\n//   })\n//     .then((response) => response.json())\n//     .then((responseJson) => {\n//       console.log(responseJson);\n//     })\n//     .catch((error) => {\n//       console.error(error);\n//     });;\n// }\nvalue:function render(){return/*#__PURE__*/React.createElement(\"div\",{id:\"stripe-payment-btn\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn\",onClick:this.doPayment},\" Click here\"));}}]);return Payment;}(React.Component);export default Payment;","map":{"version":3,"sources":["D:/projects/information/src/Copoments/Pages/Payment.js"],"names":["React","loadStripe","Payment","doPayment","stripe","paymentBtn","document","getElementById","sessionId","addEventListener","orderData","currency","quantity","amount","name","description","image","customerEmail","clientId","fetch","method","body","JSON","stringify","then","response","json","data","parse","redirectToCheckout","result","console","log","Component"],"mappings":"okBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,UAAT,KAA2B,mBAA3B,C,GACMC,CAAAA,O,2UACJC,S,CAAW,UAAM,CACf;AACA,GAAMC,CAAAA,MAAM,CAAMH,UAAU,CAAC,4CAAD,CAA5B,CACA,GAAMI,CAAAA,UAAU,CAAGC,QAAQ,CAACC,cAAT,CAAwB,oBAAxB,CAAnB,CACA,GAAIC,CAAAA,SAAJ,CACAH,UAAU,CAACI,gBAAX,CAA4B,OAA5B,CAAqC,UAAM,CACzC,GAAIC,CAAAA,SAAS,CAAG,CAChBC,QAAQ,CAAE,KADM,CAEhBC,QAAQ,CAAE,CAFM,CAGhBC,MAAM,CAAE,EAHQ,CAIhBC,IAAI,CAAE,cAJU,CAKhBC,WAAW,CAAE,qBALG,CAMhBC,KAAK,CAAE,oBANS,CAOhBC,aAAa,CAAE,wBAPC,CAQhBC,QAAQ,CAAE,OARM,CAAhB,CAUF;AACEC,KAAK,CAAC,6FAAD,CAAgG,CACrGC,MAAM,CAAE,MAD6F,CAErG;AACAC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeb,SAAf,CAH+F,CAAhG,CAAL,CAIGc,IAJH,CAIQ,SAAAC,QAAQ,CAAI,CAClB,MAAOA,CAAAA,QAAQ,CAACC,IAAT,EAAP,CACD,CAND,EAMGF,IANH,CAMQ,SAAAG,IAAI,CAAI,CACd;AACA,GAAIN,CAAAA,IAAI,CAAGC,IAAI,CAACM,KAAL,CAAWD,IAAI,CAACN,IAAhB,CAAX,CACA,MAAOb,CAAAA,SAAS,CAAGa,IAAI,CAACb,SAAxB,CACD,CAVD,EAUGgB,IAVH,CAUQ,SAAAhB,SAAS,CAAI,CACnB;AACAJ,MAAM,CAACyB,kBAAP,CAA0B,CACxBrB,SAAS,CAAEA,SADa,CAA1B,EAEGgB,IAFH,CAEQ,SAAAM,MAAM,CAAG,CAChBC,OAAO,CAACC,GAAR,CAAYF,MAAZ,EACA,CAJD,EAKD,CAjBD,EAkBD,CA9BD,EAgCA1B,MAAM,CAACyB,kBAAP,CAA0B,CACxB;AACA;AACA;AACArB,SAAS,CAAEa,IAAI,CAACb,SAJQ,CAA1B,EAKGgB,IALH,CAKQ,SAAUM,MAAV,CAAkB,CACxBC,OAAO,CAACC,GAAR,CAAYF,MAAZ,EACA;AACA;AACA;AACD,CAVD,EAWD,C,mDACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;uBACW,CACP,mBACG,2BAAK,EAAE,CAAC,oBAAR,eACN,8BAAQ,SAAS,CAAC,KAAlB,CAAwB,OAAO,CAAE,KAAK3B,SAAtC,gBADM,CADH,CAKD,C,qBA5EmBH,KAAK,CAACiC,S,EA8E5B,cAAe/B,CAAAA,OAAf","sourcesContent":["import React from 'react';\r\nimport { loadStripe } from '@stripe/stripe-js';\r\nclass Payment extends React.Component {\r\n  doPayment =() => {\r\n    // Publishable Key from Stripe Dashboard\r\n    const stripe =    loadStripe('pk_test_izTRazS0reCuAYbvSfCVkfAQ004KviIEJL');\r\n    const paymentBtn = document.getElementById('stripe-payment-btn');\r\n    let sessionId;\r\n    paymentBtn.addEventListener('click', () => {\r\n      let orderData = {\r\n      currency: 'EUR',\r\n      quantity: 1,\r\n      amount: 10,\r\n      name: 'Some product',\r\n      description: 'Product description',\r\n      image: 'https://image-url/',\r\n      customerEmail: 'vshrimali709@gmail.com',\r\n      clientId: '12345'\r\n    }\r\n    // Url to Firebase function\r\n      fetch('https://us-central1-information-management-s-c7f1c.cloudfunctions.net/createOrderAndSession', {\r\n      method: 'POST',\r\n      // Adding the order data to payload\r\n      body: JSON.stringify(orderData)\r\n      }).then(response => {\r\n        return response.json();\r\n      }).then(data => {\r\n        // Getting the session id from firebase function\r\n        var body = JSON.parse(data.body);\r\n        return sessionId = body.sessionId;\r\n      }).then(sessionId => {\r\n        // Redirecting to payment form page\r\n        stripe.redirectToCheckout({\r\n          sessionId: sessionId\r\n        }).then(result=> {\r\n         console.log(result)\r\n        });\r\n      });\r\n    });\r\n\r\n    stripe.redirectToCheckout({\r\n      // Make the id field from the Checkout Session creation API response\r\n      // available to this file, so you can provide it as parameter here\r\n      // instead of the {{CHECKOUT_SESSION_ID}} placeholder.\r\n      sessionId: body.sessionId\r\n    }).then(function (result) {\r\n      console.log(result);\r\n      // If `redirectToCheckout` fails due to a browser or network\r\n      // error, display the localized error message to your customer\r\n      // using `result.error.message`.\r\n    });\r\n  }\r\n// doPayment = async () => {\r\n//   fetch('https://us-central1-information-management-s-c7f1c.cloudfunctions.net/payWithStripe', {\r\n//     method: 'POST',\r\n//     headers: {\r\n//       Accept: 'application/json',\r\n//       'Content-Type': 'application/json',\r\n//     },\r\n//     body: JSON.stringify({\r\n//       amount: 10,\r\n//       currency: \"usd\",\r\n//     }),\r\n//   })\r\n//     .then((response) => response.json())\r\n//     .then((responseJson) => {\r\n//       console.log(responseJson);\r\n//     })\r\n//     .catch((error) => {\r\n//       console.error(error);\r\n//     });;\r\n// }\r\n  render() {\r\n    return(\r\n       <div id=\"stripe-payment-btn\">\r\n <button className=\"btn\" onClick={this.doPayment}> Click here</button>\r\n    </div>\r\n    );\r\n  }\r\n}\r\nexport default Payment;"]},"metadata":{},"sourceType":"module"}