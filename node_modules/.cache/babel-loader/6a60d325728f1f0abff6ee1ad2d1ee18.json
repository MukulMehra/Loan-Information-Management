{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\projects\\\\information\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\projects\\\\information\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:\\\\projects\\\\information\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\projects\\\\information\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\projects\\\\information\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\projects\\\\information\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{ElementsConsumer,CardElement}from'@stripe/react-stripe-js';import CardSection from'./CardSection';var CheckoutForm=/*#__PURE__*/function(_React$Component){_inherits(CheckoutForm,_React$Component);var _super=_createSuper(CheckoutForm);function CheckoutForm(){var _this;_classCallCheck(this,CheckoutForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var _this$props,stripe,elements,card,result,stripeTokenHandler;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// We don't want to let default form submission happen here,\n// which would refresh the page.\nevent.preventDefault();_this$props=_this.props,stripe=_this$props.stripe,elements=_this$props.elements;if(!(!stripe||!elements)){_context.next=4;break;}return _context.abrupt(\"return\");case 4:card=elements.getElement(CardElement);_context.next=7;return stripe.createToken(card);case 7:result=_context.sent;if(result.error){// Show error to your customer.\nconsole.log(result.error.message);}else{stripeTokenHandler=function stripeTokenHandler(token){var paymentData={token:token.id};console.log(paymentData);// Use fetch to send the token ID and any other payment data to your server.\n// https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch\nvar response=fetch('https://us-central1-information-management-s-c7f1c.cloudfunctions.net/charge',{method:'POST',headers:{'Content-Type':'application/json'},body:console.log(JSON.stringify(paymentData))}).then(function(response){return console.log(response.json());});// Return and display the result of the charge.\n};// Send the token to your server.\n// This function does not exist yet; we will define it in the next step.\nstripeTokenHandler(result.token);}case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(CheckoutForm,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(CardSection,null),/*#__PURE__*/React.createElement(\"button\",{style:{marginLeft:'4vh'},disabled:!this.props.stripe},\"Confirm order\"));}}]);return CheckoutForm;}(React.Component);export default function InjectedCheckoutForm(){return/*#__PURE__*/React.createElement(ElementsConsumer,null,function(_ref2){var stripe=_ref2.stripe,elements=_ref2.elements;return/*#__PURE__*/React.createElement(CheckoutForm,{stripe:stripe,elements:elements});});}","map":{"version":3,"sources":["D:/projects/information/src/Copoments/Pages/Payment/CheckoutForm.js"],"names":["React","ElementsConsumer","CardElement","CardSection","CheckoutForm","handleSubmit","event","preventDefault","props","stripe","elements","card","getElement","createToken","result","error","console","log","message","stripeTokenHandler","token","paymentData","id","response","fetch","method","headers","body","JSON","stringify","then","json","marginLeft","Component","InjectedCheckoutForm"],"mappings":"22BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,gBAAR,CAA0BC,WAA1B,KAA4C,yBAA5C,CAEA,MAAOC,CAAAA,WAAP,KAAwB,eAAxB,C,GAEMC,CAAAA,Y,+VACJC,Y,0FAAe,iBAAOC,KAAP,iLACb;AACA;AACAA,KAAK,CAACC,cAAN,GAHa,YAKc,MAAKC,KALnB,CAKNC,MALM,aAKNA,MALM,CAKEC,QALF,aAKEA,QALF,MAOT,CAACD,MAAD,EAAW,CAACC,QAPH,kEAaPC,IAbO,CAaAD,QAAQ,CAACE,UAAT,CAAoBV,WAApB,CAbA,uBAcQO,CAAAA,MAAM,CAACI,WAAP,CAAmBF,IAAnB,CAdR,QAcPG,MAdO,eAgBb,GAAIA,MAAM,CAACC,KAAX,CAAkB,CAChB;AACAC,OAAO,CAACC,GAAR,CAAYH,MAAM,CAACC,KAAP,CAAaG,OAAzB,EACD,CAHD,IAGO,CAIKC,kBAJL,CAIL,QAAUA,CAAAA,kBAAV,CAA6BC,KAA7B,CAAoC,CAClC,GAAMC,CAAAA,WAAW,CAAG,CAACD,KAAK,CAAEA,KAAK,CAACE,EAAd,CAApB,CACCN,OAAO,CAACC,GAAR,CAAYI,WAAZ,EACD;AACA;AACA,GAAME,CAAAA,QAAQ,CAAIC,KAAK,CAAC,8EAAD,CAAiF,CACtGC,MAAM,CAAE,MAD8F,CAEtGC,OAAO,CAAE,CACP,eAAgB,kBADT,CAF6F,CAKtGC,IAAI,CAACX,OAAO,CAACC,GAAR,CAAYW,IAAI,CAACC,SAAL,CAAeR,WAAf,CAAZ,CALiG,CAAjF,CAAL,CAOfS,IAPe,CAOV,SAAAP,QAAQ,CAAG,CACf,MAAOP,CAAAA,OAAO,CAACC,GAAR,CAAYM,QAAQ,CAACQ,IAAT,EAAZ,CAAP,CACH,CATiB,CAAlB,CAWA;AAED,CAtBI,CACL;AACA;AACAZ,kBAAkB,CAACL,MAAM,CAACM,KAAR,CAAlB,CAuBD,CA7CY,sD,6IAgDN,CACP,mBACE,4BAAM,QAAQ,CAAE,KAAKf,YAArB,eACE,oBAAC,WAAD,MADF,cAEE,8BAAQ,KAAK,CAAE,CAAC2B,UAAU,CAAC,KAAZ,CAAf,CAAmC,QAAQ,CAAE,CAAC,KAAKxB,KAAL,CAAWC,MAAzD,kBAFF,CADF,CAMD,C,0BAxDwBT,KAAK,CAACiC,S,EA2DjC,cAAe,SAASC,CAAAA,oBAAT,EAAgC,CAC7C,mBACE,oBAAC,gBAAD,MACG,mBAAEzB,CAAAA,MAAF,OAAEA,MAAF,CAAUC,QAAV,OAAUA,QAAV,oBACC,oBAAC,YAAD,EAAe,MAAM,CAAED,MAAvB,CAA+B,QAAQ,CAAEC,QAAzC,EADD,EADH,CADF,CAOD","sourcesContent":["import React from 'react';\r\nimport {ElementsConsumer, CardElement} from '@stripe/react-stripe-js';\r\n\r\nimport CardSection from './CardSection';\r\n\r\nclass CheckoutForm extends React.Component {\r\n  handleSubmit = async (event) => {\r\n    // We don't want to let default form submission happen here,\r\n    // which would refresh the page.\r\n    event.preventDefault();\r\n\r\n    const {stripe, elements} = this.props\r\n\r\n    if (!stripe || !elements) {\r\n      // Stripe.js has not yet loaded.\r\n      // Make  sure to disable form submission until Stripe.js has loaded.\r\n      return;\r\n    }\r\n\r\n    const card = elements.getElement(CardElement);\r\n    const result = await stripe.createToken(card);\r\n\r\n    if (result.error) {\r\n      // Show error to your customer.\r\n      console.log(result.error.message);\r\n    } else {\r\n      // Send the token to your server.\r\n      // This function does not exist yet; we will define it in the next step.\r\n      stripeTokenHandler(result.token);\r\n      function  stripeTokenHandler(token) {\r\n        const paymentData = {token: token.id};\r\n         console.log(paymentData);\r\n        // Use fetch to send the token ID and any other payment data to your server.\r\n        // https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch\r\n        const response =  fetch('https://us-central1-information-management-s-c7f1c.cloudfunctions.net/charge', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body:console.log(JSON.stringify(paymentData)),\r\n          \r\n        }).then(response =>{\r\n            return console.log(response.json());\r\n        });\r\n      \r\n        // Return and display the result of the charge.\r\n       \r\n      }\r\n      \r\n      \r\n    \r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <form onSubmit={this.handleSubmit}>\r\n        <CardSection />\r\n        <button style={{marginLeft:'4vh'}} disabled={!this.props.stripe}>Confirm order</button>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default function InjectedCheckoutForm() {\r\n  return (\r\n    <ElementsConsumer>\r\n      {({stripe, elements}) => (\r\n        <CheckoutForm  stripe={stripe} elements={elements} />\r\n      )}\r\n    </ElementsConsumer>\r\n  );\r\n}"]},"metadata":{},"sourceType":"module"}