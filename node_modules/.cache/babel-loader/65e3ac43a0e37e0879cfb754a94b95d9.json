{"ast":null,"code":"import _classCallCheck from\"D:\\\\projects\\\\information\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\projects\\\\information\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\projects\\\\information\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\projects\\\\information\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{loadStripe}from'@stripe/stripe-js';import axios from'axios';var Payment=/*#__PURE__*/function(_React$Component){_inherits(Payment,_React$Component);var _super=_createSuper(Payment);function Payment(){var _this;_classCallCheck(this,Payment);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.doPayment=function(){// Publishable Key from Stripe Dashboard\nvar stripe=loadStripe('pk_test_izTRazS0reCuAYbvSfCVkfAQ004KviIEJL');var paymentBtn=document.getElementById('stripe-payment-btn');var sessionId;paymentBtn.addEventListener('click',function(){var orderData={currency:'EUR',quantity:1,amount:10,name:'Some product',description:'Product description',image:'https://image-url/',customerEmail:'vshrimali709@gmail.com',clientId:'12345'};// Url to Firebase function\naxios.post('https://us-central1-information-management-s-c7f1c.cloudfunctions.net/createOrderAndSession',{// Adding the order data to payload\nbody:JSON.stringify(orderData)}).then(function(response){return response.json();}).then(function(data){// Getting the session id from firebase function\nvar body=JSON.parse(data.body);return sessionId=body.sessionId;}).then(function(sessionId){// Redirecting to payment form page\nvar _stripe$redirectToChe=stripe.redirectToCheckout({sessionId:sessionId}).then(function(result){console.log(result);console.log(error.message);}),error=_stripe$redirectToChe.error;});});};return _this;}_createClass(Payment,[{key:\"render\",// doPayment = async () => {\n//   fetch('https://us-central1-information-management-s-c7f1c.cloudfunctions.net/payWithStripe', {\n//     method: 'POST',\n//     headers: {\n//       Accept: 'application/json',\n//       'Content-Type': 'application/json',\n//     },\n//     body: JSON.stringify({\n//       amount: 10,\n//       currency: \"usd\",\n//     }),\n//   })\n//     .then((response) => response.json())\n//     .then((responseJson) => {\n//       console.log(responseJson);\n//     })\n//     .catch((error) => {\n//       console.error(error);\n//     });;\n// }\nvalue:function render(){return/*#__PURE__*/React.createElement(\"div\",{id:\"stripe-payment-btn\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn\",onClick:this.doPayment},\" Click here\"));}}]);return Payment;}(React.Component);export default Payment;","map":{"version":3,"sources":["D:/projects/information/src/Copoments/Pages/Payment.js"],"names":["React","loadStripe","axios","Payment","doPayment","stripe","paymentBtn","document","getElementById","sessionId","addEventListener","orderData","currency","quantity","amount","name","description","image","customerEmail","clientId","post","body","JSON","stringify","then","response","json","data","parse","redirectToCheckout","result","console","log","error","message","Component"],"mappings":"okBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,UAAT,KAA2B,mBAA3B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,GACMC,CAAAA,O,2UACJC,S,CAAW,UAAM,CACf;AACA,GAAMC,CAAAA,MAAM,CAAMJ,UAAU,CAAC,4CAAD,CAA5B,CACA,GAAMK,CAAAA,UAAU,CAAGC,QAAQ,CAACC,cAAT,CAAwB,oBAAxB,CAAnB,CACA,GAAIC,CAAAA,SAAJ,CACAH,UAAU,CAACI,gBAAX,CAA4B,OAA5B,CAAqC,UAAM,CACzC,GAAIC,CAAAA,SAAS,CAAG,CAChBC,QAAQ,CAAE,KADM,CAEhBC,QAAQ,CAAE,CAFM,CAGhBC,MAAM,CAAE,EAHQ,CAIhBC,IAAI,CAAE,cAJU,CAKhBC,WAAW,CAAE,qBALG,CAMhBC,KAAK,CAAE,oBANS,CAOhBC,aAAa,CAAE,wBAPC,CAQhBC,QAAQ,CAAE,OARM,CAAhB,CAUF;AACAjB,KAAK,CAACkB,IAAN,CAAW,6FAAX,CAA0G,CACxG;AACAC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeZ,SAAf,CAFkG,CAA1G,EAGKa,IAHL,CAGU,SAAAC,QAAQ,CAAI,CAClB,MAAOA,CAAAA,QAAQ,CAACC,IAAT,EAAP,CACD,CALH,EAKKF,IALL,CAKU,SAAAG,IAAI,CAAI,CACd;AACA,GAAIN,CAAAA,IAAI,CAAGC,IAAI,CAACM,KAAL,CAAWD,IAAI,CAACN,IAAhB,CAAX,CACA,MAAOZ,CAAAA,SAAS,CAAGY,IAAI,CAACZ,SAAxB,CACD,CATH,EASKe,IATL,CASU,SAAAf,SAAS,CAAI,CACnB;AADmB,0BAENJ,MAAM,CAACwB,kBAAP,CAA0B,CACrCpB,SAAS,CAAEA,SAD0B,CAA1B,EAEVe,IAFU,CAEL,SAAAM,MAAM,CAAG,CAChBC,OAAO,CAACC,GAAR,CAAYF,MAAZ,EACAC,OAAO,CAACC,GAAR,CAAYC,KAAK,CAACC,OAAlB,EACA,CALY,CAFM,CAEbD,KAFa,uBAEbA,KAFa,CAQpB,CAjBH,EAkBC,CA9BD,EAiCD,C,mDACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;uBACW,CACP,mBACG,2BAAK,EAAE,CAAC,oBAAR,eACN,8BAAQ,SAAS,CAAC,KAAlB,CAAwB,OAAO,CAAE,KAAK7B,SAAtC,gBADM,CADH,CAKD,C,qBAlEmBJ,KAAK,CAACmC,S,EAoE5B,cAAehC,CAAAA,OAAf","sourcesContent":["import React from 'react';\r\nimport { loadStripe } from '@stripe/stripe-js';\r\nimport axios from 'axios';\r\nclass Payment extends React.Component {\r\n  doPayment =() => {\r\n    // Publishable Key from Stripe Dashboard\r\n    const stripe =    loadStripe('pk_test_izTRazS0reCuAYbvSfCVkfAQ004KviIEJL');\r\n    const paymentBtn = document.getElementById('stripe-payment-btn');\r\n    let sessionId;\r\n    paymentBtn.addEventListener('click', () => {\r\n      let orderData = {\r\n      currency: 'EUR',\r\n      quantity: 1,\r\n      amount: 10,\r\n      name: 'Some product',\r\n      description: 'Product description',\r\n      image: 'https://image-url/',\r\n      customerEmail: 'vshrimali709@gmail.com',\r\n      clientId: '12345'\r\n    }\r\n    // Url to Firebase function\r\n    axios.post('https://us-central1-information-management-s-c7f1c.cloudfunctions.net/createOrderAndSession', {\r\n      // Adding the order data to payload\r\n      body: JSON.stringify(orderData)\r\n      }).then(response => {\r\n        return response.json();\r\n      }).then(data => {\r\n        // Getting the session id from firebase function\r\n        var body = JSON.parse(data.body);\r\n        return sessionId = body.sessionId;\r\n      }).then(sessionId => {\r\n        // Redirecting to payment form page\r\n       const {error}=stripe.redirectToCheckout({\r\n          sessionId: sessionId\r\n        }).then(result=> {\r\n         console.log(result)\r\n         console.log(error.message);\r\n        });\r\n      });\r\n    });\r\n\r\n    \r\n  }\r\n// doPayment = async () => {\r\n//   fetch('https://us-central1-information-management-s-c7f1c.cloudfunctions.net/payWithStripe', {\r\n//     method: 'POST',\r\n//     headers: {\r\n//       Accept: 'application/json',\r\n//       'Content-Type': 'application/json',\r\n//     },\r\n//     body: JSON.stringify({\r\n//       amount: 10,\r\n//       currency: \"usd\",\r\n//     }),\r\n//   })\r\n//     .then((response) => response.json())\r\n//     .then((responseJson) => {\r\n//       console.log(responseJson);\r\n//     })\r\n//     .catch((error) => {\r\n//       console.error(error);\r\n//     });;\r\n// }\r\n  render() {\r\n    return(\r\n       <div id=\"stripe-payment-btn\">\r\n <button className=\"btn\" onClick={this.doPayment}> Click here</button>\r\n    </div>\r\n    );\r\n  }\r\n}\r\nexport default Payment;"]},"metadata":{},"sourceType":"module"}