{"ast":null,"code":"import _classCallCheck from\"D:\\\\projects\\\\information\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\projects\\\\information\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"D:\\\\projects\\\\information\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"D:\\\\projects\\\\information\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\projects\\\\information\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import firebase from'../../firebase SDK/firebase';var FirebaseTest=/*#__PURE__*/function(_Component){_inherits(FirebaseTest,_Component);var _super=_createSuper(FirebaseTest);function FirebaseTest(props){var _this;_classCallCheck(this,FirebaseTest);_this=_super.call(this,props);_this.handleChange=function(e){if(e.target.files[0]){var image=e.target.files[0];_this.setState(function(){return{image:image};});}};_this.handleUpload=function(){console.log(_this.state.image);var image=_this.state.image;var uploadTask=firebase.storage().ref('images/').put(image);// here code start of retrieving the image\nuploadTask.on(\"state_changed\",function(snapshot){// progress function ...\nvar progress=Math.round(snapshot.bytesTransferred/snapshot.totalBytes*100);_this.setState({progress:progress});},function(error){// Error function ...\nconsole.log(error);},function(){// complete function ...\nfirebase.storage().ref(\"images\").child(image.name).getDownloadURL().then(function(url){_this.setState({url:url});});});};_this.writeData=function(){var data=firebase.database().ref('users/').push(_this.state);console.log('Data saved',data);};_this.readData=function(){var newData=firebase.database().ref('users/');newData.on('value',function(snapshot){var items=[];snapshot.forEach(function(child){items.push({City_Name:child.val().email,Name_value:child.val().password//    Email_value:child.val().Email,\n//    profile_img:child.val().url,\n//    total_item:child.val().Totaldonation\n});});_this.setState({data:items});console.log(_this.state.data);});};_this.displayData=function(){return/*#__PURE__*/React.createElement(\"div\",null,_this.state.data.map(function(item,index){return/*#__PURE__*/React.createElement(\"p\",{key:index},item.City_Name,item.Name_value);}));};_this.state={email:'varshangshrimali@yahoo.com',password:'324567',data:[],image:null,url:'',progress:0};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.handleUpload=_this.handleUpload.bind(_assertThisInitialized(_this));return _this;}_createClass(FirebaseTest,[{key:\"componentDidMount\",value:function componentDidMount(){// this.writeData();\nthis.readData();}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"Setting a database\"),this.displayData(),/*#__PURE__*/React.createElement(\"div\",{style:{textAlign:'center'}},/*#__PURE__*/React.createElement(\"progress\",{value:this.state.progress,max:\"100\"}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"button\",{onClick:this.handleUpload},\"upload\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"img\",{src:this.state.url||'https://via.placeholder.com/400x300',alt:\"Uploaded Image\",height:\"300\",width:\"400\"})));}}]);return FirebaseTest;}(Component);export default FirebaseTest;","map":{"version":3,"sources":["D:/projects/information/src/Copoments/Pages/firebaseTest.jsx"],"names":["React","Component","firebase","FirebaseTest","props","handleChange","e","target","files","image","setState","handleUpload","console","log","state","uploadTask","storage","ref","put","on","snapshot","progress","Math","round","bytesTransferred","totalBytes","error","child","name","getDownloadURL","then","url","writeData","data","database","push","readData","newData","items","forEach","City_Name","val","email","Name_value","password","displayData","map","item","index","bind","textAlign"],"mappings":"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","sourcesContent":["import React,{ Component } from 'react';\r\nimport firebase from '../../firebase SDK/firebase';\r\nclass FirebaseTest extends Component{\r\n    constructor(props){\r\n        super(props);\r\n           this.state={\r\n                email:'varshangshrimali@yahoo.com',\r\n                password:'324567',\r\n                data:[],\r\n                image:null,\r\n                url:'',\r\n                progress:0\r\n              }\r\n        this.handleChange=this.handleChange.bind(this);\r\n        this.handleUpload=this.handleUpload.bind(this);\r\n    }\r\n   \r\n handleChange = e =>{\r\n    if (e.target.files[0]) {\r\n        const image = e.target.files[0];\r\n        this.setState(() => ({ image }));\r\n      }\r\n }\r\n handleUpload =()=>{\r\n    console.log(this.state.image);\r\n    const {image}=this.state;\r\n    const uploadTask = firebase.storage().ref('images/').put(image);\r\n// here code start of retrieving the image\r\nuploadTask.on(\r\n    \"state_changed\",\r\n    snapshot => {\r\n      // progress function ...\r\n      const progress = Math.round(\r\n        (snapshot.bytesTransferred / snapshot.totalBytes) * 100\r\n      );\r\n      this.setState({ progress });\r\n    },\r\n    error => {\r\n      // Error function ...\r\n      console.log(error);\r\n    },\r\n    () => {\r\n      // complete function ...\r\n     firebase.storage()\r\n        .ref(\"images\")\r\n        .child(image.name)\r\n        .getDownloadURL()\r\n        .then(url => {\r\n          this.setState({ url });\r\n        });\r\n    }\r\n  );\r\n }\r\n    writeData=()=>{\r\n      const data = firebase.database().ref('users/').push(this.state);\r\n        console.log('Data saved',data);\r\n    }\r\n    readData=()=>{\r\n        const newData = firebase.database().ref('users/');\r\n        newData.on('value',(snapshot)=>{\r\n            let items =[];\r\n            snapshot.forEach((child)=>{\r\n              items.push({\r\n                City_Name:child.val().email,\r\n                Name_value: child.val().password,\r\n            //    Email_value:child.val().Email,\r\n            //    profile_img:child.val().url,\r\n            //    total_item:child.val().Totaldonation\r\n              });\r\n            });\r\n            this.setState({ data:items});\r\n            console.log(this.state.data);      \r\n        })\r\n    }\r\n    displayData =()=>{\r\n        return (<div>\r\n            {this.state.data.map((item, index) => (\r\n                <p key={index}>{item.City_Name}\r\n                {item.Name_value}\r\n                </p>\r\n            ))}\r\n            </div>);\r\n    }\r\n    componentDidMount(){\r\n        // this.writeData();\r\n        this.readData();\r\n    }\r\n    render(){\r\n        return (\r\n            <div >\r\n                <h1>Setting a database</h1>\r\n             {this.displayData()}\r\n            <div style={{textAlign:'center'}}>\r\n            <progress value={this.state.progress} max=\"100\" />\r\n            <br/>\r\n             <input type=\"file\" onChange={this.handleChange}/>\r\n             <button onClick={this.handleUpload}>upload</button>\r\n             <br />\r\n             <img src={this.state.url || 'https://via.placeholder.com/400x300'} alt=\"Uploaded Image\" height=\"300\" width=\"400\"/>\r\n             </div>\r\n            </div>\r\n        )\r\n    }\r\n   \r\n}\r\n\r\nexport default FirebaseTest;\r\n"]},"metadata":{},"sourceType":"module"}